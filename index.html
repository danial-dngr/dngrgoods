<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DNGR GOODS</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<style>

/* ===== GLOBAL ===== */

body {
  margin: 0;
  overflow: hidden;
  font-family: monospace;
  color: white;
  background: repeating-linear-gradient(
    180deg,
    #000 0px,
    #000 25px,
    #0011ff 25px,
    #0011ff 50px
  );
}

/* ===== DRAG WINDOWS ===== */

.window {
  position: absolute;
  background: black;
  border: 2px solid white;
  padding: 16px;
  cursor: grab;
  resize: both;
  overflow: auto;
  min-width: 250px;
  min-height: 200px;
}

.window:active {
  cursor: grabbing;
}

.menu {
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 320px;
  height: 500px;
  z-index: 20;
}

.menu h3 {
  margin-top: 0;
}

.menu ul {
  list-style: none;
  padding: 0;
  font-size: 13px;
}

.menu li {
  margin-bottom: 12px;
  cursor: pointer;
}

.menu li:hover {
  text-decoration: underline;
}

.footer {
  position: fixed;
  bottom: 20px;
  right: 20px;
  font-size: 12px;
  text-align: right;
  z-index: 30;
}

/* ===== CLOSE BUTTON ===== */

.close {
  position: absolute;
  top: 8px;
  right: 10px;
  cursor: pointer;
  font-weight: bold;
}

.close:hover {
  color: black;
  background: white;
}

/* ===== THREE BACKGROUND ===== */

#three-bg {
  position: fixed;
  top: 0;
  left: 0;
  pointer-events: none;
  z-index: 1;
}

</style>
</head>
<body>

<div id="three-bg"></div>

<div class="window menu" id="menu">
  <h3>PROJECTS</h3>
  <ul>
    <li data-project="SOLARIS">I — SOLARIS</li>
    <li data-project="NOCTURNAL">II — NOCTURNAL INGESTIONS</li>
    <li data-project="ABOUT">III — ABOUT DNGR</li>
  </ul>
  <p style="font-size:11px;">
  DRAG WINDOWS.<br>
  OPEN MULTIPLE.<br>
  DISTURB THE PARTICLES.
  </p>
</div>

<div class="footer">
DNGR GOODS<br>
DANIAL GRAHAM<br>
danial@dngrgoods.com
</div>

<script>

/* ===========================
   DRAG LOGIC
=========================== */

let highestZ = 20;

function makeDraggable(el) {
  let offsetX = 0;
  let offsetY = 0;
  let isDragging = false;

  el.addEventListener("mousedown", (e) => {
    isDragging = true;
    highestZ++;
    el.style.zIndex = highestZ;
    offsetX = e.clientX - el.offsetLeft;
    offsetY = e.clientY - el.offsetTop;
  });

  document.addEventListener("mousemove", (e) => {
    if (!isDragging) return;
    el.style.left = e.clientX - offsetX + "px";
    el.style.top = e.clientY - offsetY + "px";
    el.style.transform = "none";
  });

  document.addEventListener("mouseup", () => {
    isDragging = false;
  });
}

makeDraggable(document.getElementById("menu"));

/* ===========================
   PROJECT DATA
=========================== */

const projects = {
  SOLARIS: {
    image: "https://dngrgoods.com/wp-content/uploads/2023/02/SOLARIS-BRAND-GUIDE.gif",
    text: "Minimal solar housing identity exploration."
  },
  NOCTURNAL: {
    image: "https://dngrgoods.com/wp-content/uploads/2023/02/NOCTURNAL-INGESTIONS.gif",
    text: "Restaurant identity built for loud gigs and cheap pints."
  },
  ABOUT: {
    image: "https://dngrgoods.com/wp-content/uploads/2023/07/DSC01289-1.png",
    text: "Creative Director specialising in identity, typography and motion."
  }
};

function openProject(name) {
  const data = projects[name];
  if (!data) return;

  const win = document.createElement("div");
  win.className = "window";
  win.style.top = "50%";
  win.style.left = "50%";
  win.style.width = "500px";
  win.style.height = "350px";
  win.style.transform = "translate(-50%, -50%)";
  win.style.zIndex = ++highestZ;

  win.innerHTML = `
    <div class="close">X</div>
    <h2>${name}</h2>
    <img src="${data.image}" style="width:100%; border:2px solid #0011ff;">
    <p style="font-size:13px;">${data.text}</p>
  `;

  win.querySelector(".close").onclick = () => win.remove();

  document.body.appendChild(win);
  makeDraggable(win);
}

document.querySelectorAll(".menu li").forEach(item => {
  item.addEventListener("click", () => {
    openProject(item.dataset.project);
  });
});

/* ===========================
   THREE PARTICLE FIELD
=========================== */

const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(
  75,
  window.innerWidth / window.innerHeight,
  0.1,
  1000
);

const renderer = new THREE.WebGLRenderer({ alpha: true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.getElementById("three-bg").appendChild(renderer.domElement);

camera.position.z = 50;

const characters = ["✷", "☯", "☼", "⚆"];
const particles = [];
const count = 120;

function createTextTexture(text) {
  const canvas = document.createElement("canvas");
  const ctx = canvas.getContext("2d");
  canvas.width = 64;
  canvas.height = 64;
  ctx.fillStyle = "white";
  ctx.font = "bold 42px monospace";
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";
  ctx.fillText(text, 32, 32);
  return new THREE.CanvasTexture(canvas);
}

for (let i = 0; i < count; i++) {
  const texture = createTextTexture(
    characters[Math.floor(Math.random() * characters.length)]
  );
  const material = new THREE.SpriteMaterial({ map: texture });
  const sprite = new THREE.Sprite(material);

  sprite.position.set(
    (Math.random() - 0.5) * 120,
    (Math.random() - 0.5) * 120,
    (Math.random() - 0.5) * 120
  );

  sprite.userData.velocity = new THREE.Vector3(
    Math.random() * 0.1 - 0.05,
    Math.random() * 0.1 - 0.05,
    Math.random() * 0.1 - 0.05
  );

  scene.add(sprite);
  particles.push(sprite);
}

function animate() {
  requestAnimationFrame(animate);

  particles.forEach(p => {
    p.position.add(p.userData.velocity);
    if (p.position.length() > 150) {
      p.position.set(
        (Math.random() - 0.5) * 100,
        (Math.random() - 0.5) * 100,
        (Math.random() - 0.5) * 100
      );
    }
  });

  renderer.render(scene, camera);
}

animate();

window.addEventListener("resize", () => {
  renderer.setSize(window.innerWidth, window.innerHeight);
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
});

</script>
</body>
</html>
